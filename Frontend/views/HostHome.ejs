<%- include('partials/header.ejs') %>
<body>
    <%- include('partials/nav.ejs') %>

    <% if(success && success.length > 0) { %>
        <div class="flash_msg can flex justify-center absolute w-full z-10 p-4">
            <div class="xl:mt-24 md:mt-24 lg:mt-24 mt-44 flex items-center gap-3 bg-emerald-500 text-white p-4 w-96 shadow-lg shadow-emerald-300/40 rounded-xl animate__animated animate__fadeInDown">
            <span><%= success %></span>
            </div>
        </div>
        <%}%>
    <% if(result && result.length > 0){ %>
            <h1 class=" text-xl mt-11 ml-4 font-semibold relative top-36 md:top-16 lg:top-24 lg:ml-14 xl:ml-14 xl:top-20">Hosted Home<i class="fa-solid fa-chevron-right text-sm "></i></h1>
    <%} else{ %>
                <div class="relative top-36 md:top-16 lg:top-24 xl:top-20 flex flex-col items-center justify-center gap-8 px-4 py-10">

  <!-- Empty State Notice -->
  <div class="group flex items-center gap-3 bg-amber-100 border border-amber-300 text-amber-700 px-6 py-4 rounded-2xl shadow-md hover:bg-amber-200 transition-all duration-300 cursor-default">
    <i class="fa-solid fa-house-crack text-amber-600 text-2xl animate-pulse"></i>
    <h1 class="text-lg md:text-xl font-semibold">No homes hosted yet — be the first one!</h1>
    <i class="fa-solid fa-chevron-right text-sm transform group-hover:translate-x-1 transition-transform duration-300"></i>
  </div>

  <!-- Host Invitation Card -->
  <a href="/host" class="w-full md:w-[80%] lg:w-[60%] xl:w-[40%]">
    <div class="card2 w-full bg-white shadow-lg hover:shadow-2xl text-center flex items-center justify-start rounded-3xl h-28 p-4 border border-gray-200 hover:border-black transition-all duration-300 cursor-pointer">
      <img src="/images/Hostimg.avif" class="h-16 w-16 rounded-2xl object-cover ml-2" alt="Become a host">
      <div class="text-left ml-6">
        <h3 class="font-semibold text-lg text-gray-800 group-hover:text-black">Become a host</h3>
        <small class="text-gray-500 block">It’s easy to start hosting and earn extra income</small>
      </div>
      <div class="ml-auto mr-6 text-gray-400 group-hover:text-black transition-colors duration-300">
        <i class="fa-solid fa-arrow-right text-lg"></i>
      </div>
    </div>
  </a>

</div>



    <% } %>

    <div class="main grid xs:grid-cols-2 sm:grid-cols-3  lg:grid-cols-4 md:grid-cols-4 xl:grid-cols-6 grid-cols-2 w-full lg:p-10 text-center items-center relative top-36 md:top-16 lg:top-11 xl:top-11 justify-items-center">
        <% result.forEach(data => { %>
    
        <div class="card w-full md:p-5  xl:p-5 p-4 relative text-left">

            <a class="cursor-pointer z-20" href="/view/<%=data._id.toString()%>">
                <img class="rounded-2xl w-44 h-36 md:h-44  lg:h-44  xl:h-44 object-cover" src="<%= data.image.url %>" alt="">
            </a>

            <p class="text-sm">Villa in <%= data.location %></p>
            <small class="flex text-gray-600"> $<%=data.price %> per night <span><i class="fa-solid fa-star-half-stroke text-yellow-400"></i><%= (Math.random()* (5 - 1)+ 1).toFixed(2) %></span></small>
        </div>
            
       <% }) %>

       
    </div>
    <%- include("partials/lowerNav.ejs") %>


    
   <div class="relative top-[100vh] bottom-0 left-0 w-full z-0">
     <%-include("partials/footer.ejs")%>
   </div>
       

    

    <script>
    document.querySelectorAll(".fav-btn").forEach(btn => {
    btn.addEventListener("click", async (e) => {
        e.preventDefault();
        const id = btn.dataset.id;

        let res = await fetch(`/favorites/${id}`, { method: "POST" });
        let data = await res.json();

        // Button ke andar ke SVG ko pick karo
        const heart = btn.querySelector(".heart-icon");

        if (data.action.toLowerCase() === "added") {
            heart.style.fill = "red";
        } else {
            heart.style.fill = "rgba(0,0,0,0.5)";
        }
    });
});



        const msg = document.querySelector(".flash_msg");
        setTimeout(function(){
            msg.style.opacity = "0";
            msg.style.transition = "opacity 0.5s ease"
            setTimeout(() => {
                msg.remove()
            },500)
        },2000)

    </script>
    



        


</body>
</html>